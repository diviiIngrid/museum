{"ast":null,"code":"import React,{useEffect,useState}from'react';import{fetchExhibitions}from'../../http/exhibitionAPI';import ExhibitionCard from'../../components/ExhibitionCard/ExhibitionCard';import'./ExhibitionsPage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ExhibitionsPage=()=>{const[exhibitions,setExhibitions]=useState([]);const[loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[totalCount,setTotalCount]=useState(0);const limit=9;useEffect(()=>{const getExhibitions=async()=>{try{setLoading(true);const data=await fetchExhibitions(page,limit);setExhibitions(data.rows);setTotalCount(data.count);setTotalPages(Math.ceil(data.count/limit));}catch(error){console.error('Ошибка получения выставок:',error);}finally{setLoading(false);}window.scrollTo(0,0);};getExhibitions();},[page]);const handlePageChange=newPage=>{window.scrollTo(0,0);setPage(newPage);};return/*#__PURE__*/_jsxs(\"div\",{className:\"exhibitions-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"exhibitions-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0412\\u044B\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041E\\u0437\\u043D\\u0430\\u043A\\u043E\\u043C\\u044C\\u0442\\u0435\\u0441\\u044C \\u0441 \\u043D\\u0430\\u0448\\u0438\\u043C\\u0438 \\u0442\\u0435\\u043A\\u0443\\u0449\\u0438\\u043C\\u0438 \\u0438 \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u043E\\u044F\\u0449\\u0438\\u043C\\u0438 \\u0432\\u044B\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430\\u043C\\u0438.\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"exhibitions-content section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0432\\u044B\\u0441\\u0442\\u0430\\u0432\\u043E\\u043A...\"}):exhibitions.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-exhibitions\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0439 \\u043C\\u043E\\u043C\\u0435\\u043D\\u0442 \\u0432\\u044B\\u0441\\u0442\\u0430\\u0432\\u043E\\u043A \\u043D\\u0435\\u0442.\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"exhibitions-grid\",children:exhibitions.map(exhibition=>/*#__PURE__*/_jsx(\"div\",{className:\"exhibition-item\",children:/*#__PURE__*/_jsx(ExhibitionCard,{exhibition:exhibition})},exhibition.id))}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",disabled:page===1,onClick:()=>handlePageChange(page-1),children:\"\\u041F\\u0440\\u0435\\u0434\\u044B\\u0434\\u0443\\u0449\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"pagination-pages\",children:[...Array(totalPages)].map((_,index)=>/*#__PURE__*/_jsx(\"button\",{className:\"pagination-page \".concat(page===index+1?'active':''),onClick:()=>handlePageChange(index+1),children:index+1},index))}),/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",disabled:page===totalPages,onClick:()=>handlePageChange(page+1),children:\"\\u0421\\u043B\\u0435\\u0434\\u0443\\u044E\\u0449\\u0438\\u0439\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"exhibitions-count\",children:[totalCount,\" \\u0432\\u044B\\u0441\\u0442\\u0430\\u0432\\u043E\\u043A\"]})]})})})]});};export default ExhibitionsPage;","map":{"version":3,"names":["React","useEffect","useState","fetchExhibitions","ExhibitionCard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ExhibitionsPage","exhibitions","setExhibitions","loading","setLoading","page","setPage","totalPages","setTotalPages","totalCount","setTotalCount","limit","getExhibitions","data","rows","count","Math","ceil","error","console","window","scrollTo","handlePageChange","newPage","className","children","length","map","exhibition","id","disabled","onClick","Array","_","index","concat"],"sources":["C:/Users/admin/Desktop/mmuseum/client/src/pages/ExhibitionsPage/ExhibitionsPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { fetchExhibitions } from '../../http/exhibitionAPI';\nimport ExhibitionCard from '../../components/ExhibitionCard/ExhibitionCard';\nimport './ExhibitionsPage.css';\n\nconst ExhibitionsPage = () => {\n  const [exhibitions, setExhibitions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [totalCount, setTotalCount] = useState(0);\n  const limit = 9;\n\n  useEffect(() => {\n    const getExhibitions = async () => {\n      try {\n        setLoading(true);\n        const data = await fetchExhibitions(page, limit);\n        setExhibitions(data.rows);\n        setTotalCount(data.count);\n        setTotalPages(Math.ceil(data.count / limit));\n      } catch (error) {\n        console.error('Ошибка получения выставок:', error);\n      } finally {\n        setLoading(false);\n      }\n      window.scrollTo(0, 0);\n    };\n    getExhibitions();\n  }, [page]);\n\n  const handlePageChange = (newPage) => {\n    window.scrollTo(0, 0);\n    setPage(newPage);\n  };\n\n  return (\n    <div className=\"exhibitions-page\">\n      <div className=\"exhibitions-header\">\n        <div className=\"container\">\n          <h1>Выставки</h1>\n          <p>Ознакомьтесь с нашими текущими и предстоящими выставками.</p>\n        </div>\n      </div>\n\n      <div className=\"exhibitions-content section\">\n        <div className=\"container\">\n          {loading ? (\n            <div className=\"loading\">Загрузка выставок...</div>\n          ) : exhibitions.length === 0 ? (\n            <div className=\"no-exhibitions\">\n              <p>На данный момент выставок нет.</p>\n            </div>\n          ) : (\n            <>\n              <div className=\"exhibitions-grid\">\n                {exhibitions.map(exhibition => (\n                  <div key={exhibition.id} className=\"exhibition-item\">\n                    <ExhibitionCard exhibition={exhibition} />\n                  </div>\n                ))}\n              </div>\n\n              {totalPages > 1 && (\n                <div className=\"pagination\">\n                  <button \n                    className=\"pagination-btn\"\n                    disabled={page === 1}\n                    onClick={() => handlePageChange(page - 1)}\n                  >\n                    Предыдущий\n                  </button>\n                  \n                  <div className=\"pagination-pages\">\n                    {[...Array(totalPages)].map((_, index) => (\n                      <button\n                        key={index}\n                        className={`pagination-page ${page === index + 1 ? 'active' : ''}`}\n                        onClick={() => handlePageChange(index + 1)}\n                      >\n                        {index + 1}\n                      </button>\n                    ))}\n                  </div>\n                  \n                  <button \n                    className=\"pagination-btn\"\n                    disabled={page === totalPages}\n                    onClick={() => handlePageChange(page + 1)}\n                  >\n                    Следующий\n                  </button>\n                </div>\n              )}\n              \n              <div className=\"exhibitions-count\">\n                 {totalCount} выставок\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ExhibitionsPage;\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}