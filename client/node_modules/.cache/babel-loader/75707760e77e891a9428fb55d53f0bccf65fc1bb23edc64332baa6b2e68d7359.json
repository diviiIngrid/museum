{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{login}from'../../http/userAPI';import{AuthContext}from'../../context/AuthContext';import'./LoginPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{var _location$state;const{setUser,setIsAuth}=useContext(AuthContext);const[loginError,setLoginError]=useState('');const navigate=useNavigate();const location=useLocation();const from=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.from)||'/';const validationSchema=Yup.object({email:Yup.string().email('Неверный адрес эл.почта').required('Требуется эл.почты'),password:Yup.string().required('Требуется пароль')});const handleSubmit=async(values,_ref)=>{let{setSubmitting}=_ref;try{setLoginError('');const user=await login(values.email,values.password);setUser(user);setIsAuth(true);navigate(from,{replace:true});}catch(error){setLoginError('неверный адрес эл.почты или пароля');console.error('Login error:',error);}finally{setSubmitting(false);}};useEffect(()=>{window.scrollTo(0,0);},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"auth-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-subtitle\",children:\"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442, \\u043F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430 \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E\\u0442 \\u0441\\u0432\\u043E\\u0435 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{email:'',password:''},validationSchema:validationSchema,onSubmit:handleSubmit,children:_ref2=>{let{isSubmitting}=_ref2;return/*#__PURE__*/_jsxs(Form,{className:\"auth-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\u042D\\u043B.\\u043F\\u043E\\u0447\\u0442\\u0430\"}),/*#__PURE__*/_jsx(Field,{type:\"email\",id:\"email\",name:\"email\",className:\"form-control\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"email\",component:\"div\",className:\"error-message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(Field,{type:\"password\",id:\"password\",name:\"password\",className:\"form-control\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",component:\"div\",className:\"error-message\"})]}),loginError&&/*#__PURE__*/_jsx(\"div\",{className:\"form-error\",children:loginError}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",disabled:isSubmitting,children:isSubmitting?'Вход...':'Войти'})]});}}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0415\\u0449\\u0435 \\u043D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})})]})})});};export default LoginPage;","map":{"version":3,"names":["React","useEffect","useState","useContext","Link","useNavigate","useLocation","Formik","Form","Field","ErrorMessage","Yup","login","AuthContext","jsx","_jsx","jsxs","_jsxs","LoginPage","_location$state","setUser","setIsAuth","loginError","setLoginError","navigate","location","from","state","validationSchema","object","email","string","required","password","handleSubmit","values","_ref","setSubmitting","user","replace","error","console","window","scrollTo","className","children","initialValues","onSubmit","_ref2","isSubmitting","htmlFor","type","id","name","component","disabled","to"],"sources":["C:/Users/admin/Desktop/mmuseum/client/src/pages/LoginPage/LoginPage.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\nimport { login } from '../../http/userAPI';\nimport { AuthContext } from '../../context/AuthContext';\nimport './LoginPage.css';\n\nconst LoginPage = () => {\n  const { setUser, setIsAuth } = useContext(AuthContext);\n  const [loginError, setLoginError] = useState('');\n  const navigate = useNavigate();\n  const location = useLocation();\n  const from = location.state?.from || '/';\n\n  const validationSchema = Yup.object({\n    email: Yup.string().email('Неверный адрес эл.почта').required('Требуется эл.почты'),\n    password: Yup.string().required('Требуется пароль')\n  });\n\n  const handleSubmit = async (values, { setSubmitting }) => {\n    try {\n      setLoginError('');\n      const user = await login(values.email, values.password);\n      setUser(user);\n      setIsAuth(true);\n      navigate(from, { replace: true });\n    } catch (error) {\n      setLoginError('неверный адрес эл.почты или пароля');\n      console.error('Login error:', error);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  useEffect(() => {\n          window.scrollTo(0, 0);\n        }, []);\n\n  return (\n    <div className=\"auth-page\">\n      <div className=\"auth-container\">\n        <div className=\"auth-card\">\n          <h1>Авторизация</h1>\n          <p className=\"auth-subtitle\">Добро пожаловат, пожалуйста введите данные от свое аккаунта</p>\n          \n          <Formik\n            initialValues={{ email: '', password: '' }}\n            validationSchema={validationSchema}\n            onSubmit={handleSubmit}\n          >\n            {({ isSubmitting }) => (\n              <Form className=\"auth-form\">\n                <div className=\"form-group\">\n                  <label htmlFor=\"email\">Эл.почта</label>\n                  <Field type=\"email\" id=\"email\" name=\"email\" className=\"form-control\" />\n                  <ErrorMessage name=\"email\" component=\"div\" className=\"error-message\" />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label htmlFor=\"password\">Пароль</label>\n                  <Field type=\"password\" id=\"password\" name=\"password\" className=\"form-control\" />\n                  <ErrorMessage name=\"password\" component=\"div\" className=\"error-message\" />\n                </div>\n                \n                {loginError && <div className=\"form-error\">{loginError}</div>}\n                \n                <button type=\"submit\" className=\"btn btn-primary btn-block\" disabled={isSubmitting}>\n                  {isSubmitting ? 'Вход...' : 'Войти'}\n                </button>\n              </Form>\n            )}\n          </Formik>\n          \n          <div className=\"auth-footer\">\n            <p>Еще нет аккаунта?<Link to=\"/register\">Зарегистрироваться</Link></p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}