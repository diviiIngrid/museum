{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{Link,useNavigate}from'react-router-dom';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{registration}from'../../http/userAPI';import{AuthContext}from'../../context/AuthContext';import'./RegisterPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterPage=()=>{const{setUser,setIsAuth}=useContext(AuthContext);const[registerError,setRegisterError]=useState('');const navigate=useNavigate();const validationSchema=Yup.object({name:Yup.string().required('Требуется имя пользователя'),email:Yup.string().email('Неверный адрес эл.почты').required('Требуется эл.почта'),password:Yup.string().min(6,'Пароль должен содержать не менее 6 символов').required('Требуется пароль'),confirmPassword:Yup.string().oneOf([Yup.ref('password'),null],'Пароли должны совпадать').required('Требуется подтвердить пароль')});const handleSubmit=async(values,_ref)=>{let{setSubmitting}=_ref;try{setRegisterError('');const user=await registration(values.name,values.email,values.password);setUser(user);setIsAuth(true);navigate('/');}catch(error){if(error.response&&error.response.data){setRegisterError(error.response.data.message||'Ошибка регистрации');}else{setRegisterError('ошибка регистрации. Повторите еще раз');}console.error('Registration error:',error);}finally{setSubmitting(false);}};useEffect(()=>{window.scrollTo(0,0);},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"auth-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0439 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),/*#__PURE__*/_jsx(\"p\",{className:\"auth-subtitle\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{name:'',email:'',password:'',confirmPassword:''},validationSchema:validationSchema,onSubmit:handleSubmit,children:_ref2=>{let{isSubmitting}=_ref2;return/*#__PURE__*/_jsxs(Form,{className:\"auth-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(Field,{type:\"text\",id:\"name\",name:\"name\",className:\"form-control\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"name\",component:\"div\",className:\"error-message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\u042D\\u043B.\\u043F\\u043E\\u0447\\u0442\\u0430\"}),/*#__PURE__*/_jsx(Field,{type:\"email\",id:\"email\",name:\"email\",className:\"form-control\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"email\",component:\"div\",className:\"error-message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(Field,{type:\"password\",id:\"password\",name:\"password\",className:\"form-control\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"password\",component:\"div\",className:\"error-message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(Field,{type:\"password\",id:\"confirmPassword\",name:\"confirmPassword\",className:\"form-control\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"confirmPassword\",component:\"div\",className:\"error-message\"})]}),registerError&&/*#__PURE__*/_jsx(\"div\",{className:\"form-error\",children:registerError}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",disabled:isSubmitting,children:isSubmitting?'Регистрация...':'Зарегистрироваться'})]});}}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0443\\u0436\\u0435 \\u0435\\u0441\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]})})]})})});};export default RegisterPage;","map":{"version":3,"names":["React","useEffect","useState","useContext","Link","useNavigate","Formik","Form","Field","ErrorMessage","Yup","registration","AuthContext","jsx","_jsx","jsxs","_jsxs","RegisterPage","setUser","setIsAuth","registerError","setRegisterError","navigate","validationSchema","object","name","string","required","email","password","min","confirmPassword","oneOf","ref","handleSubmit","values","_ref","setSubmitting","user","error","response","data","message","console","window","scrollTo","className","children","initialValues","onSubmit","_ref2","isSubmitting","htmlFor","type","id","component","disabled","to"],"sources":["C:/Users/admin/Desktop/mmuseum/client/src/pages/RegisterPage/RegisterPage.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\nimport { registration } from '../../http/userAPI';\nimport { AuthContext } from '../../context/AuthContext';\nimport './RegisterPage.css';\n\nconst RegisterPage = () => {\n  const { setUser, setIsAuth } = useContext(AuthContext);\n  const [registerError, setRegisterError] = useState('');\n  const navigate = useNavigate();\n\n  const validationSchema = Yup.object({\n    name: Yup.string().required('Требуется имя пользователя'),\n    email: Yup.string().email('Неверный адрес эл.почты').required('Требуется эл.почта'),\n    password: Yup.string()\n      .min(6, 'Пароль должен содержать не менее 6 символов')\n      .required('Требуется пароль'),\n    confirmPassword: Yup.string()\n      .oneOf([Yup.ref('password'), null], 'Пароли должны совпадать')\n      .required('Требуется подтвердить пароль')\n  });\n\n  const handleSubmit = async (values, { setSubmitting }) => {\n    try {\n      setRegisterError('');\n      const user = await registration(values.name, values.email, values.password);\n      setUser(user);\n      setIsAuth(true);\n      navigate('/');\n    } catch (error) {\n      if (error.response && error.response.data) {\n        setRegisterError(error.response.data.message || 'Ошибка регистрации');\n      } else {\n        setRegisterError('ошибка регистрации. Повторите еще раз');\n      }\n      console.error('Registration error:', error);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  useEffect(() => {\n          window.scrollTo(0, 0);\n        }, []);\n\n  return (\n    <div className=\"auth-page\">\n      <div className=\"auth-container\">\n        <div className=\"auth-card\">\n          <h1>Создай аккаунт</h1>\n          <p className=\"auth-subtitle\"></p>\n          \n          <Formik\n            initialValues={{ \n              name: '', \n              email: '', \n              password: '', \n              confirmPassword: '' \n            }}\n            validationSchema={validationSchema}\n            onSubmit={handleSubmit}\n          >\n            {({ isSubmitting }) => (\n              <Form className=\"auth-form\">\n                <div className=\"form-group\">\n                  <label htmlFor=\"name\">Имя</label>\n                  <Field type=\"text\" id=\"name\" name=\"name\" className=\"form-control\" />\n                  <ErrorMessage name=\"name\" component=\"div\" className=\"error-message\" />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label htmlFor=\"email\">Эл.почта</label>\n                  <Field type=\"email\" id=\"email\" name=\"email\" className=\"form-control\" />\n                  <ErrorMessage name=\"email\" component=\"div\" className=\"error-message\" />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label htmlFor=\"password\">Пароль</label>\n                  <Field type=\"password\" id=\"password\" name=\"password\" className=\"form-control\" />\n                  <ErrorMessage name=\"password\" component=\"div\" className=\"error-message\" />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label htmlFor=\"confirmPassword\">Подтвердите пароль</label>\n                  <Field type=\"password\" id=\"confirmPassword\" name=\"confirmPassword\" className=\"form-control\" />\n                  <ErrorMessage name=\"confirmPassword\" component=\"div\" className=\"error-message\" />\n                </div>\n                \n                {registerError && <div className=\"form-error\">{registerError}</div>}\n                \n                <button type=\"submit\" className=\"btn btn-primary btn-block\" disabled={isSubmitting}>\n                  {isSubmitting ? 'Регистрация...' : 'Зарегистрироваться'}\n                </button>\n              </Form>\n            )}\n          </Formik>\n          \n          <div className=\"auth-footer\">\n            <p>уже есть аккаунт? <Link to=\"/login\">Авторизоваться</Link></p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterPage;\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}